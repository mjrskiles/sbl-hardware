{
  "$schema": "https://soundbytelabs.net/schema/cecrops.schema.json",
  "schemaVersion": "0.1",

  "mcu": "stm32h750",

  "source": {
    "url": "https://stm32-rs.github.io/stm32-rs/stm32h750.svd.patched",
    "fallback": "https://raw.githubusercontent.com/stm32-rs/stm32-rs/master/svd/vendor/STMicro/STM32H750.svd"
  },

  "outputs": {
    "rcc": {
      "peripherals": ["RCC"],
      "output": "reg/rcc.hpp"
    },
    "gpio": {
      "peripherals": ["GPIOA", "GPIOB", "GPIOC", "GPIOD", "GPIOE", "GPIOF", "GPIOG", "GPIOH", "GPIOI", "GPIOJ", "GPIOK"],
      "output": "reg/gpio.hpp"
    },
    "adc": {
      "peripherals": ["ADC1", "ADC2", "ADC3", "ADC3_Common"],
      "output": "reg/adc.hpp"
    },
    "flash": {
      "peripherals": ["FLASH"],
      "output": "reg/flash.hpp"
    },
    "pwr": {
      "peripherals": ["PWR"],
      "output": "reg/pwr.hpp"
    },
    "dma": {
      "peripherals": ["DMA1", "DMA2", "DMAMUX1", "DMAMUX2", "BDMA"],
      "output": "reg/dma.hpp"
    },
    "sai": {
      "peripherals": ["SAI1", "SAI2", "SAI3", "SAI4"],
      "output": "reg/sai.hpp"
    }
  },

  "patches": {
    "RCC": {
      "description": "Fix register offsets - SVD has spurious 4-byte gap after CSR",
      "registers": {
        "AHB3RSTR": {
          "addressOffset": "0x78",
          "cascade": true,
          "reason": "SVD has 0x7C with 4-byte gap after CSR; cascade shifts all following registers"
        }
      }
    },
    "ADC1": {
      "description": "Remove CCR - belongs in ADC_Common, not individual ADCs",
      "registers": {
        "CCR": {
          "delete": true,
          "reason": "CCR is at ADC12_Common base+0x08, not in individual ADC peripherals"
        }
      }
    },
    "ADC2": {
      "description": "Remove CCR - belongs in ADC_Common, not individual ADCs",
      "registers": {
        "CCR": {
          "delete": true,
          "reason": "CCR is at ADC12_Common base+0x08, not in individual ADC peripherals"
        }
      }
    },
    "ADC3": {
      "description": "Remove CCR - belongs in ADC_Common, not individual ADCs",
      "registers": {
        "CCR": {
          "delete": true,
          "reason": "CCR is at ADC3_Common base+0x08, not in individual ADC peripherals"
        }
      }
    }
  },

  "manual": [
    "reg/usart.hpp",
    "reg/cortex_m.hpp"
  ],

  "options": {
    "namespace": "sbl::hw::reg",
    "include_guard_prefix": "SBL_HW_REG",
    "generate_bit_constants": true,
    "generate_peripheral_instances": true
  }
}
